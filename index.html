<!DOCTYPE html>
<title>Ba simulator</title>
<script type="module" src="built/sim.js"></script>

Defender level: <select id="deflevelselect">
    <option value="4">Level 1</option>
    <option value="5" selected>Level 2-5</option>
</select>
<br>

Wave: <select id="waveselect">
    <option value="1">Wave 1</option>
    <option value="2">Wave 2</option>
    <option value="3">Wave 3</option>
    <option value="4">Wave 4</option>
    <option value="5">Wave 5</option>
    <option value="6">Wave 6</option>
    <option value="7">Wave 7</option>
    <option value="8">Wave 8</option>
    <option value="9">Wave 9</option>
    <option value="10">Wave 10</option>
</select>
<br>

Runner movements: <input id="runnermovements" type="text"/>
<br>

Tick duration (milliseconds): <input id="tickduration" type="number" min="100" max="1200" value="600"/>
<br>

<input type="checkbox" id="togglerepair" checked>
<label for="togglerepair">Require repairs</label>
<br>

<input type="checkbox" id="toggleinfinitefood">
<label for="toggleinfinitefood">Infinite food</label>
<br>

<input type="checkbox" id="togglelogtorepair" checked>
<label for="togglelogtorepair">Require log to repair</label>
<br>

<input type="checkbox" id="togglepausesl">
<label for="togglepausesl">Require paused to save/load</label>
<br>

<input type="checkbox" id="markingtiles">
<label for="markingtiles">Tile marker mode</label>

<input type="color" id="marker" name="marker" value="#000000"> Marker color
<br>
<br>

<table id="teamtable" style="border: 1px solid">
    <caption><b>Team Commands</b></caption>
    <tr>
        <td name="mainattacker">
            <b>Main Attacker</b>
            <br>
            <textarea id="mainattackercommands"></textarea>
        </td>
        <td name="secondattacker">
            <b>Second Attacker</b>
            <br>
            <textarea id="secondattackercommands"></textarea>
        </td>
        <td name="healer">
            <b>Healer</b>
            <br>
            <textarea id="healercommands"></textarea>
        </td>
        <td name="collector">
            <b>Collector</b>
            <br>
            <textarea id="collectorcommands"></textarea>
        </td>
    </tr>
</table>
<br>

<button id="wavestart"></button> <b>Tick count: <span id="tickcount"></span></b> --- <b>Current Food: <span id="currdeffood"></span></b>
<br>

<canvas id="basimcanvas"></canvas>
<br>

<b>space</b> starts or stops the wave.<br>
<b>left-click</b> moves the player.<br>
<b>t</b> drops tofu.<br>
<b>c</b> drops crackers.<br>
<b>w</b> drops worms.<br>
<b>1</b> picks up tofu.<br>
<b>2</b> picks up crackers.<br>
<b>3</b> picks up worms.<br>
<b>l</b> picks up logs.<br>
<b>r</b> repairs a trap.<br>
<b>p</b> pauses/unpauses.<br>
<b>s</b> saves state (pauses).<br>
<b>y</b> loads state (must be running) (pauses).<br>
<br>

<b>Runner movements:</b> Forced runner movements. For example, 'ww-e-s' for first runner west west, second runner east, third runner south.<br>
<br>

<b>Tile marker mode:</b> Click to switch between movement and tile marker mode.<br>
While in tile marker mode, left-clicking an unmarked tile will mark it and left-clicking a marked tile will unmark it.<br>
Click the colored rectangle beside 'Marker' to change the color of marked tiles.<br>
<br>

<b>Team Commands:</b> For each player, you can enter a list of positions to click to move to at specified ticks.
Each line of the input should be a single command, of the format "tick:x,y", specifying that the player should click
to move to position (x,y) at the given tick.
<br>
<br>
For example:
<br>
<br>
5:20,21<br>
10:30,30<br>
4:29,25
<br>
<br>
would be a valid input. The same tick can not be specified more than once for a single player. The order of the commands
does not need to be in the order of the ticks association with the commands.
<br>
<br>

<b>Save/Load tldr:</b><br>
Save with  <b>s</b>, load with <b>y</b> while sim is running (started). After loading, unpause with <b>p</b>.
<br>
<br>

<b>Save/Load:</b><br>
If you save with <b>s</b>, then loading with <b>y</b> will bring you to the same state on the same wave you saved. Unpause with <b>p</b><br>
Defender level will behave as it was when you saved. Runner movements are calculated dynamically, so they will vary each time you load.<br>
Tick duration can be changed by stopping the wave, changing tick duration, then starting the wave, then loading.<br>
Repair requirement is dynamic and will be whatever the value currently is set to via the selection menu.<br>
Although the wave and defender level will behave the same as when you saved, the selection in the menu will not change when you load.<br>
So, if you change the selection, start, then load: you will load from the saved wave and level, but they will not change in selectors.<br>
If you then stop and start the wave, it will play with the wave and level displayed in the selectors normally (not from loaded wave/level).<br>
<br>

It is always assumed the defender has a hammer equipped - there is no need to pick up the hammer.<br>
First food is always tofu (for convenience), changes to random new food every 50 ticks (52, 102, 152, etc.).<br>
<br>

Please let me know if anything is not working correctly. -McLovin1981<br>
<br>

<b>Thanks to all contributors!</b>
